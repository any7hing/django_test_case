# DJANGO сервер с новостями
Реализация тестового задания. Django приложение с REST api, PostgreSQL и Docker

## Содержание
- [DJANGO сервер с новостями](#django-сервер-с-новостями)
  - [Содержание](#содержание)
  - [Описание](#описание)
  - [Технологии](#технологии)
  - [Использование](#использование)
  - [Тестирование](#тестирование)

## Описание
Сервер авторизации, новостей, комменатриев и лайков на Django REST framework.Авторизация реализована с помошью JWT токенов. 
Новостям могут стать лайки(реализован toggle) и писать/обновлять комментарии только авторизованные пользователи. 
Реализовано разделение прав: Пользователь может править/удалять только свои комменатрии и новости, админы - все, так же, пользователь может удалять все комменатрии к своей новости.
При запросе новостей отображается количество лайков, список пользователей которые ставили лайки и комменатрии.
У новостей есть три статуса(OPEN,CLOSE,DRAFT). DRAFT(черновик), видят только авторы и админы.
Можно получить список новостей кторым постил лайк, и отсортировать новости по количеству лайков.
Дополнительно реализована:
- Пагинация
- Фильтрация по авторам, по дате создания
- Поиск по названию и тексту новости
- Переменные виртуального окружения
- Контейнеризация в Docker

![Структура новости](https://i.ibb.co/gjpw3BJ/2023-07-24-153039.png)

## Технологии
- [Django](https://www.djangoproject.com/)
- [Django REST framework](https://www.django-rest-framework.org/)
- [PostgreSQL](https://www.postgresql.org/)
- [Docker](https://www.docker.com/)
- [Pytest](https://docs.pytest.org/)
- [Djosser JWT](https://djoser.readthedocs.io/)

## Использование
Склонируйте репозиторий
Установите переменные окружения в файле .env
Запустите контейнер командой
```sh
docker-compose up -d --build
```

## Тестирование
После запуска контейнера, скрипт прогонит тестирование с помошью pytest. Код тестирование лежит в папке test/test_news_api.py
Тест будет включать в себя: 
- Создание пользователей: обычного юзера и админа
- Получение JWT токенов пользователями
- Создание новости пользователем
- Попытка удаление новости другим пользователем(не админом)
- Удаление новости админом
- Создание комментария к новости
- Удаление комменатрия к новости автором новости
- Попытка удаление комментария не автором
